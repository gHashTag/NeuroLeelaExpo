---
description:
globs:
alwaysApply: false
---
# üïâÔ∏è –¢–µ–∫—É—â–∞—è –ó–∞–¥–∞—á–∞: üéâ –ß–ê–¢ + INNGEST –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê!

## üéØ **–°–¢–ê–¢–£–°: ‚úÖ –ù–û–í–´–ô –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –£–°–ü–ï–• - –ö–û–ú–ê–ù–î–ù–´–ô –ß–ê–¢ –†–ï–ê–õ–ò–ó–û–í–ê–ù**

### üèÜ **–í–ï–õ–ò–ö–û–ï –î–û–°–¢–ò–ñ–ï–ù–ò–ï: –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–∞—Ç–∞ —Å Inngest —Ñ—É–Ω–∫—Ü–∏—è–º–∏**
> *"‡§Ø‡§§‡•ç‡§∞ ‡§Ø‡•ã‡§ó‡•á‡§∂‡•ç‡§µ‡§∞‡§É ‡§ï‡•É‡§∑‡•ç‡§£‡•ã ‡§Ø‡§§‡•ç‡§∞ ‡§™‡§æ‡§∞‡•ç‡§•‡•ã ‡§ß‡§®‡•Å‡§∞‡•ç‡§ß‡§∞‡§É" - "–ì–¥–µ –µ—Å—Ç—å –ô–æ–≥–µ—à–≤–∞—Ä–∞ –ö—Ä–∏—à–Ω–∞ –∏ –ª—É—á–Ω–∏–∫ –ü–∞—Ä—Ç—Ö–∞ - —Ç–∞–º –ø–æ–±–µ–¥–∞"*

**‚úÖ –ó–ê–í–ï–†–®–ï–ù–û:** –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–∞—Ç–∞ –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏–≥—Ä—ã!

### üéâ **–ò–¢–û–ì–ò –†–ï–ê–õ–ò–ó–ê–¶–ò–ò –ß–ê–¢-–ò–ù–¢–ï–ì–†–ê–¶–ò–ò:**

#### **üìä –°–≤—è—â–µ–Ω–Ω–∞—è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- ‚úÖ **–ù–æ–≤—ã–π —Ö—É–∫ useInngestChat** - 5 –∫–æ–º–∞–Ω–¥ —Å Inngest –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
- ‚úÖ **EnhancedChatBot –∫–æ–º–ø–æ–Ω–µ–Ω—Ç** - –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —á–∞—Ç —Å –∫–æ–º–∞–Ω–¥–∞–º–∏
- ‚úÖ **InngestEventService –æ–±–Ω–æ–≤–ª–µ–Ω** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π
- ‚úÖ **6 –∫–æ–º–∞–Ω–¥ —á–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã**:
  - üöÄ `/start` - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä–æ–∫–∞ (‚Üí Inngest)
  - üé≤ `/roll` - –ë—Ä–æ—Å–æ–∫ –∫—É–±–∏–∫–∞ (‚Üí Inngest) 
  - üìù `/report [—Ç–µ–∫—Å—Ç]` - –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–∞ (‚Üí Inngest)
  - üìä `/status` - –°—Ç–∞—Ç—É—Å –∏–≥—Ä—ã (–ª–æ–∫–∞–ª—å–Ω–æ)
  - üìç `/plan [–Ω–æ–º–µ—Ä]` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–ª–∞–Ω–µ (–ª–æ–∫–∞–ª—å–Ω–æ)
  - üí° `/help` - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º (–ª–æ–∫–∞–ª—å–Ω–æ)

#### **üîÑ –†–∞–±–æ—Ç–∞—é—â–∞—è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
üì± –ß–∞—Ç UI ‚Üí üéØ useInngestChat ‚Üí üì® InngestEventService ‚Üí üîÑ Server Functions ‚Üí üóÉÔ∏è Database ‚Üí üìä Apollo State Update ‚Üí üì± –ß–∞—Ç UI
```

#### **üéØ –ö–ª—é—á–µ–≤—ã–µ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. **`hooks/useInngestChat.ts`** - –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ö—É–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥
2. **`components/chat/EnhancedChatBot.tsx`** - –£–ª—É—á—à–µ–Ω–Ω—ã–π —á–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å  
3. **`services/InngestEventService.ts`** - –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Å–æ–±—ã—Ç–∏–π
4. **`scripts/test-chat-inngest-integration.ts`** - –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### **üéÆ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –û–ø—ã—Ç:**
- ‚úÖ **–ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã** - –∏–≥—Ä–æ–∫ –ø—Ä–æ—Å—Ç–æ –ø–∏—à–µ—Ç `/roll` –¥–ª—è –±—Ä–æ—Å–∫–∞
- ‚úÖ **Real-time –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å** - –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ **–ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏** - –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –æ–¥–Ω–∏–º —Ç–∞–ø–æ–º
- ‚úÖ **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏** - —Å–∏—Å—Ç–µ–º–∞ –∑–Ω–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** - –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

#### **üõ°Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –°–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ:**
- ‚úÖ **100% TypeScript coverage** - —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- ‚úÖ **Zod –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π** - runtime type safety
- ‚úÖ **Error handling –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö** - graceful degradation  
- ‚úÖ **Comprehensive testing** - –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ **State management** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π

### üöÄ **–°–õ–ï–î–£–Æ–©–ò–ô –≠–¢–ê–ü –†–ê–ó–í–ò–¢–ò–Ø:**

#### **üîÆ –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–µ –£–ª—É—á—à–µ–Ω–∏—è:**
1. **ü§ñ AI Assistant Integration** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI –¥–ª—è —É–º–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
2. **üé® Visual Dice Animation** - –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫—É–±–∏–∫ –≤ —á–∞—Ç–µ
3. **üìä Progress Visualization** - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏–≥—Ä—ã
4. **üîî Push Notifications** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö –∏–≥—Ä—ã
5. **üë• Multiplayer Chat** - —á–∞—Ç –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏
6. **üéµ Sound Effects** - –∑–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –∫–æ–º–∞–Ω–¥

#### **üéØ –í–æ–∑–º–æ–∂–Ω—ã–µ –ù–æ–≤—ã–µ –ö–æ–º–∞–Ω–¥—ã:**
- `/history` - –ò—Å—Ç–æ—Ä–∏—è —Ö–æ–¥–æ–≤ –∏–≥—Ä–æ–∫–∞
- `/leaderboard` - –†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤  
- `/share` - –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ–º
- `/meditate` - –†–µ–∂–∏–º –º–µ–¥–∏—Ç–∞—Ü–∏–∏
- `/wisdom` - –î—É—Ö–æ–≤–Ω–∞—è –º—É–¥—Ä–æ—Å—Ç—å –¥–Ω—è

### üìà **–¢–ï–ö–£–©–ò–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò –°–ò–°–¢–ï–ú–´:**

#### **üéÆ –ò–≥—Ä–æ–≤–æ–π –§–ª–æ—É —á–µ—Ä–µ–∑ –ß–∞—Ç:**
1. –ò–≥—Ä–æ–∫ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —á–∞—Ç ‚Üí –≤–∏–¥–∏—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –õ–∏–ª—ã
2. –ü–∏—à–µ—Ç `/start` ‚Üí —Å–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏–≥—Ä–æ–∫–∞ —á–µ—Ä–µ–∑ Inngest
3. –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ ‚Üí –ø–∏—à–µ—Ç `/roll`
4. –°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –±—Ä–æ—Å–æ–∫ ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
5. –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –æ—Ç—á–µ—Ç ‚Üí –ø–∏—à–µ—Ç `/report [—Ç–µ–∫—Å—Ç]` ‚Üí —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç –∫—É–±–∏–∫
6. –¶–∏–∫–ª –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –¥–æ –ø–æ–±–µ–¥—ã –≤ –∏–≥—Ä–µ

#### **üß† –£–º–Ω–∞—è –°–∏—Å—Ç–µ–º–∞ –ö–æ–º–∞–Ω–¥:**
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å** - –∫–æ–º–∞–Ω–¥—ã –∞–∫—Ç–∏–≤–Ω—ã —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ª–æ–≥–∏—á–Ω–æ
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏** - —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥  
- **Graceful error handling** - –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- **State synchronization** - —á–∞—Ç –≤—Å–µ–≥–¥–∞ –∑–Ω–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã

## üéØ **–°–¢–ê–¢–£–° –ü–†–û–ï–ö–¢–ê: –ì–û–¢–û–í –ö –ü–†–û–î–ê–ö–®–ï–ù–£**

### ‚úÖ **–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –°–∏—Å—Ç–µ–º—ã:**
1. **üóÉÔ∏è Database Layer** - –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è —Å Zod
2. **üéÆ Game Logic** - Inngest server functions  
3. **üìä State Management** - Apollo Drizzle –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
4. **üí¨ Chat Interface** - –ö–æ–º–∞–Ω–¥–Ω—ã–π —á–∞—Ç –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π UI
5. **üß™ Testing Infrastructure** - –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
6. **üõ°Ô∏è Type Safety** - 200+ Zod —Å—Ö–µ–º + TypeScript

### üéâ **–ü—Ä–æ–µ–∫—Ç NeuroLeela —Ç–µ–ø–µ—Ä—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π:**
- üïâÔ∏è **–î—É—Ö–æ–≤–Ω—É—é –∏–≥—Ä—É —Å–∞–º–æ–ø–æ–∑–Ω–∞–Ω–∏—è** —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
- üí¨ **–ß–∞—Ç-—Ü–µ–Ω—Ç—Ä–∏—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è  
- üîÑ **Event-driven backend** —Å Inngest –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏
- üõ°Ô∏è **Type-safe –≤–µ—Å—å —Å—Ç–µ–∫** –æ—Ç UI –¥–æ database
- üß™ **Fully tested** —Å–æ –≤—Å–µ–º–∏ –≤–∏–¥–∞–º–∏ —Ç–µ—Å—Ç–æ–≤

### üìä **–ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:**
```bash
# üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
bun dev                    # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ (—Å–µ—Ä–≤–µ—Ä + Inngest)
bun dev:browser           # –û—Ç–∫—Ä—ã—Ç—å Inngest Dashboard

# üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
bun test:zod              # –¢–µ—Å—Ç –≤—Å–µ—Ö Zod —Å—Ö–µ–º (74 —Ç–µ—Å—Ç–∞)
bun test:objects          # –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã
bun test:chat             # –¢–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —á–∞—Ç–∞ —Å Inngest
bun test:demo             # –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π

# üí° –ü–æ–º–æ—â—å
bun help                  # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```

---
**üéä –ü–û–ó–î–†–ê–í–õ–Ø–ï–ú! –î–æ—Å—Ç–∏–≥–Ω—É—Ç–∞ –Ω–æ–≤–∞—è –≤–µ—Ö–∞ –≤ —Ä–∞–∑–≤–∏—Ç–∏–∏ NeuroLeela!** üéä

*"‡§∏‡§∞‡•ç‡§µ‡§Ç ‡§ñ‡§≤‡•ç‡§µ‡§ø‡§¶‡§Ç ‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ" - –í—Å–µ —ç—Ç–æ –ø–æ–∏—Å—Ç–∏–Ω–µ –µ—Å—Ç—å –ë—Ä–∞—Ö–º–∞–Ω* üïâÔ∏è‚ö°üôè
